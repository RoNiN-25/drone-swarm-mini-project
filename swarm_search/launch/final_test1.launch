<?xml version="1.0"?>

<launch>

  <!-- Start Gazebo with wg world running in (max) realtime -->

  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" default="$(find swarm_search)/car_description/worlds/car.world"/>
  </include>

<!-- create a separate namespace for each drone -->
  <!-- drone2 in second quadrant -->
  <group ns="drone2">

    <!-- Spawn simulated quadrotor uav -->
    <include file="$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch" >
    <arg name="model" value="$(find hector_quadrotor_description)/urdf/quadrotor_hokuyo_utm30lx.gazebo.xacro"/>
    <arg name="controllers" value="
        controller/attitude
        controller/velocity
        controller/position
        "/>
    <arg name="name" value="drone2"/>
    <arg name="tf_prefix" value="drone2"/>
    <arg name="x" default="-1"/>
    <arg name="y" default="1"/>
    <arg name="z" default="0.5"/>
    </include>

    <remap from="/cmd_vel" to="/drone2/cmd_vel" />
    <remap from="/ground_truth_to_tf/pose" to="/drone2/ground_truth_to_tf/pose" />
    <!--
    <node pkg="swarm_search" name="controller" type="pid_controller.py" args="$(find swarm_search)/scripts" output="screen">
    </node> -->

  </group>

  <node pkg="rosservice" name="motors2" type="rosservice" args="call --wait /drone2/enable_motors 'true'" />

  <!-- Start rviz visualization with preset config
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find hector_quadrotor_demo)/rviz_cfg/outdoor_flight.rviz"/>
  -->

  <!--
  <include file="$(find hector_quadrotor_teleop)/launch/xbox_controller.launch" >
    <arg name="control_mode" value="position"/>
  </include>
  -->

</launch>
